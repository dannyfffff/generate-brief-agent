# Step 1: 简报撰写 System Prompt (ABC全部相同)
BRIEFING_SYSTEM_PROMPT = """
# 角色
你是一位经验丰富、专业且敏锐的资深新闻编辑...
... (这里是你的所有角色、技能和限制文本)
"""


# Step 2: 简报撰写 Human Prompt (包含输出格式要求)  ，即是第一段
# 注意：我们将用 {raw_context} 和 {workflow_input} 格式化这些模板
BRIEFING_HUMAN_PROMPT_TEMPLATE_A = """
知识整合后的信息为：
--- 事实基础 ---
{raw_context}

根据检索整合的信息生成以下内容。
注意：重要的数据和技术指标内容请严格从给定的来源中找，不要自己随便生成。

【简报标题】  
关于 [请用与原始问题 "{workflow_input}" 最相关的主题词替换] 发布的分析研判

一、基本情况
（第一章：事件简述，450字以内，简述事件的内容和事件分析）

写作要求：根据聚合信息进行总结，保证信息的真实性和合理性，参考政府公文报告常用格式。
请直接输出简报内容（从【简报标题】开始），不要包含任何额外的解释性文字。
"""
BRIEFING_HUMAN_PROMPT_TEMPLATE_B = """
知识整合后的信息为：
--- 事实基础 ---
{raw_context}
根据检索整合的信息生成以下内容,注意重要的数据和技术指标内容请严格从给定的来源中找，不要自己随便生成 ：


【简报标题】
（自动生成吸引眼球的20字内标题）
一、基本情况
（第一章：事件简述，大约350字，简述事件的内容，事件分析，以及事件产生的影响）
写作要求：
第一段：首句：明确事件时间+核心。第二-三句：简述核心内容和特点。第四句：对我国的影响

示例如下：
一、美国OpenAI被爆出数据泄露
2025 年 8 月 8 日，美国人工智能企业 OpenAI 正式发布新一代人工智能模型 GPT-5。该模型定位为 OpenAI 迄今最智能、最快且最实用的产品，是其迈向通用人工智能的关键里程碑。在编码能力、幻觉控制、智能体任务执行、个性化交互等核心领域，GPT-5 实现显著突破，同时具备场景自动识别、多版本适配及场景化功能优化等特性，目前已向所有 ChatGPT 用户开放。GPT-5 的推出表明，我国大模型能力仍有优化提升空间，需加大技术与工程研发投入，持续缩小在该领域与美国的差距。
"""
BRIEFING_HUMAN_PROMPT_TEMPLATE_C = """
知识整合后的信息为：
--- 事实基础 ---
{raw_context}
根据检索整合的信息生成以下内容,注意重要的数据和技术指标内容请严格从给定的来源中找，不要自己随便生成 ：


【简报标题】
（自动生成吸引眼球的20字内标题）
一、事件的基本情况
（第一章：事件简述，大约350字，简述事件的内容，事件分析，以及事件产生的影响）
写作要求：
第一段：首句：明确事件时间+核心事件。第二句：简述核心内容。
第二段的内容：该事件发生的主要原因和背景，以及事件发生产生的不同方面的影响。但不要直接出现“该事件发生的主要原因”这种生硬的话

示例如下：
一、美国OpenAI被爆出数据泄露
2025 年 8 月 8 日，美国人工智能企业 OpenAI 正式发布新一代人工智能模型 GPT-5。该模型定位为 OpenAI 迄今最智能、最快且最实用的产品，是其迈向通用人工智能的关键里程碑。在编码能力、幻觉控制、智能体任务执行、个性化交互等核心领域，GPT-5 实现显著突破，同时具备场景自动识别、多版本适配及场景化功能优化等特性，目前已向所有 ChatGPT 用户开放。GPT-5 的推出表明，我国大模型能力仍有优化提升空间，需加大技术与工程研发投入，持续缩小在该领域与美国的差距。
"""



#第二章系统提示词（自动填写大纲）
CHAPTER_2_USER_PROMPT_TEMPLATE_A_AUTO = '''
知识整合后的信息为：{{input1}}

根据检索整合的信息生成政策的内容分析,从政策具体内容、解决的现有问题注意重要的数据和内容请严格从给定的来源中找，不要自己随便生成 ：


二、 政策的基本内容（1300字左右即可，不要太多）
有单独的章节标题，标题格式为：
#二、 内容及分析#
写作要求：
以
根据检索整合的信息生成政策的内容分析,从政策具体内容、解决的现有问题注意重要的数据和内容请严格从给定的来源中找，不要自己随便生成 。
写作为总分结构：语言要偏陈述性一些，客观一些，偏政府公文风格。
按政策内容分段，每段首句以总结性短句开头，格式统一为：
一是xxx。
二是xxx。
三是xxx。
注：本章聚焦政策内容本身，类似于政策获取渠道不需要讨论，本章不超过五段。

请不要编写虚假内容!
只输出内容，在最后不要出现：“本分析所有内容均来自指定来源，无自主生成信息。”类似的话。
'''
CHAPTER_2_USER_PROMPT_TEMPLATE_B_AUTO = """
知识整合后的信息为：{{input1}}

根据检索整合的信息生成以下内容，,注意重要的数据和技术指标内容请严格从给定的来源中找，不要自己随便生成 ：

二、有关思考分析（800字）
有单独的章节标题：标题建议：#二、有关思考分析#
写作要求：
这一章结主要突出技术特点
总分结构：语言要偏陈述性一些，客观一些
首先需要一个总起段，（但不要出现类似于“以下将从技术特点出发，进行客观分析”这种文字）
每段首句以总结性短句开头，但与后续内容不分段，格式统一为：

（注：下面的一是，二是，不是标题，而是每段的首句，请不要单独划分为一行；禁止“标题、子标题、列表、编号、加粗”等，强调“纯正文格式”。）
一是...（大概250字左右）...。
二是...（大概250字左右）...。
三是...（大概250字左右）...
注：三条分点即可，减少括号内容的出现，在最后的地方也不必出现总和段落
请不要编写虚假内容和数据!

该部分的示例如下：
二、有关思考分析
一是技术发展与伦理规范的脱节，OpenAI在GPT-5的发布过程中暴露了AI技术快速发展与现有伦理规范之间的矛盾。 GPT-5在多个领域的性能显著提升，尤其是在编程、多模态理解和健康咨询方面，展示了强大的能力。然而，这些能力的增强也带来了新的伦理问题。例如，在健康咨询领域，GPT-5虽然在HealthBench Hard测试中表现出较低的错误率，但其仍然存在一定的风险，可能会误导用户。此外，GPT-5的“性格”设定和工具智能的使用也引发了关于AI与人类关系的讨论。在我国，随着AI技术的快速发展，类似的问题也日益凸显。如何在技术进步的同时，确保AI系统的伦理性和社会责任感，是一个亟待解决的问题。
二是数据安全与隐私保护的挑战，GPT-5的发布再次引发了对数据安全和隐私保护的关注。 尽管OpenAI在GPT-5中引入了“安全补全”机制，但数据泄露和滥用的风险依然存在。例如，GPT-5-Codex在实际应用中涉及大量敏感代码和数据，如果这些数据被恶意利用，将对企业和个人造成严重损失。在我国，随着《个人信息保护法》等法律法规的实施，对数据安全和隐私保护的要求越来越高。AI企业在收集和处理数据时，需要更加严格地遵守相关法律法规，确保数据的安全性和用户的隐私权不受侵犯。
三是AI技术的普及与社会接受度的挑战，GPT-5的发布引发了公众对AI技术的广泛关注和讨论。 尽管GPT-5在多个领域表现出色，但部分用户对其“性格冷”和一些错误的回答表示不满。这反映了AI技术在普及过程中面临的社会接受度问题。在我国，AI技术的应用也越来越广泛，但在实际推广过程中，如何平衡技术优势与用户体验，提高公众对AI技术的信任度，是一个重要的挑战。此外，AI技术的普及还需要考虑不同群体的需求和利益，确保技术的公平性和包容性。
"""
CHAPTER_2_USER_PROMPT_TEMPLATE_C_AUTO = """
知识整合后的信息为：{{input1}}

根据检索整合的信息生成以下内容，,注意重要的数据和技术指标内容请严格从给定的来源中找，不要自己随便生成 ：
第二章分析这个事件背后的深层次的原因是什么，是什么问题导致的，我们国家是否有类似的问题；

二、有关思考分析（850字左右，该标题加粗）
总分结构：语言要偏陈述性一些，客观一些
每段首句以总结性短句开头，与后续内容不分段，格式统一为：（注：下面的一是二是不是标题，是每段的首句，请不要单独划分为一行。禁止“标题、子标题、列表、编号、加粗”等，强调“纯正文格式”）
一是...（大概250字左右）...、
二是...（大概250字左右）...、
三是...（大概250字左右）...
注：三条分点即可，减少括号内容的出现，在最后的地方也不必出现总和段落
请不要编写虚假内容和数据!
示例如下：
二、有关思考分析
一是数据合法性与隐私保护的冲突，OpenAI的数据抓取行为引发了关于互联网数据“合理使用”边界的争议。在美国，集体隐私诉讼和版权侵权诉讼直指OpenAI未经用户同意抓取数据的行为，暴露了AI技术发展与现有法律框架之间的矛盾。在我国，随着《个人信息保护法》等法律法规的实施，对个人信息的保护日益加强，但AI企业在数据收集和使用过程中如何平衡创新需求与隐私保护，仍是一个亟待解决的问题。

二是AI数据安全与泄露风险的挑战，从员工泄露内部信息到Sora模型API的恶意泄露，OpenAI的一系列数据泄露事件凸显了AI公司在数据安全方面存在的漏洞。AI企业掌握的大量敏感数据，使其成为黑客攻击的高价值目标。在我国，随着AI技术的快速发展，数据安全问题同样日益突出。如何加强AI数据的安全管理，防止数据泄露，是AI行业必须面对的挑战。

三是AI技术发展与伦理规范的滞后，OpenAI事件反映出，AI技术的快速发展已经超出了现有伦理规范的范畴。从数据抓取引发的隐私和版权争议，到Sora模型测试中艺术家权益的问题，都指向了AI技术发展与伦理规范之间的脱节。在我国，随着AI技术的应用越来越广泛，如何建立与技术发展相适应的伦理规范，确保AI技术的负责任使用，是一个亟待解决的问题。这不仅关系到AI技术的可持续发展，也关系到社会的公平正义。
"""

CHAPTER_2_SYSTEM_PROMPT_A_AUTO =  """
你需要根据用户原始消息总结内容。"""
CHAPTER_2_SYSTEM_PROMPT_B_AUTO = """
你需要根据用户原始消息总结内容。"""
CHAPTER_2_SYSTEM_PROMPT_C_AUTO = """
你需要根据用户原始消息总结内容。"""

CHAPTER_2_USER_PROMPT_TEMPLATE_A_OUTLINE = """我想要按照下面的大纲生成相关内容
{{dagang}}"""
CHAPTER_2_USER_PROMPT_TEMPLATE_B_OUTLINE = """我想要按照下面的大纲生成相关内容
{{dagang}}"""
CHAPTER_2_USER_PROMPT_TEMPLATE_C_OUTLINE = """我想要按照下面的大纲生成相关内容
{{dagang}}"""

CHAPTER_2_SYSTEM_PROMPT_A_OUTLINE = """知识整合后的信息为：{{input1}}
用户给出的大纲是{{dagang}}
# 写作要求：
1.根据检索整合的信息生成政策的内容分析，按照用户给出的大纲{{dagang}}从政策具体内容、解决的现有问题角度分析，注意：数据和内容请严格从{{input1}}中找，不要随意生成。
2.写作为总分结构：语言要偏陈述性一些，客观一些，偏政府公文风格。
# 写作格式
有单独的章节标题，标题格式为：
#二、 内容及分析#
（按大纲{{dagang}}的分点来分段，每段首句以总结性短句（与大纲的每一条对应）开头，格式统一为：）
一是xxx。
二是xxx。
三是xxx。
注：本章聚焦政策内容本身，类似于政策获取渠道不需要讨论，本章不超过五段。
# 注意
1. 请不要编写虚假内容！根据检索整合的信息生成政策的内容分析,从政策具体内容、解决的现有问题注意重要的数据和内容。请严格从给定的来源中找，不要自己随便生成。
2. 只输出内容，在最后不要出现：“本分析所有内容均来自指定来源，无自主生成信息。”类似的话。
3. 只使用{{dagang}}中和本段相关的部分，即“政策内容及分析/ 事件原因 / 动因”等，其余内容如“政策建议 / 计划 / 改良方案”等不要使用"""
CHAPTER_2_SYSTEM_PROMPT_B_OUTLINE = """知识整合后的信息为：{{input1}}
用户给出的大纲是{{dagang}}
# 写作要求：
1.根据检索整合的信息生成政策的内容分析，按照用户给出的大纲{{dagang}}从政策具体内容、解决的现有问题角度分析，注意：数据和内容请严格从{{input1}}中找，不要随意生成。
2.写作为总分结构：语言要偏陈述性一些，客观一些，偏政府公文风格。
# 写作格式
有单独的章节标题，标题格式为：
#二、 有关思考分析#
（按大纲{{dagang}}的分点来分段，每段首句以总结性短句（与大纲的每一条对应）开头，格式统一为：）
一是xxx。
二是xxx。
三是xxx。
注：本章聚焦技术特点本身，本章不超过五段。
# 注意
1. 请不要编写虚假内容！请严格从给定的来源中找，不要自己随便生成。
2. 只输出内容，在最后不要出现：“本分析所有内容均来自指定来源，无自主生成信息。”类似的话。
3. 只使用{{dagang}}中和本段相关的部分，即“思考分析/ 事件原因 / 动因”等，其余内容如“政策建议 / 计划 / 改良方案”等不要使用"""
CHAPTER_2_SYSTEM_PROMPT_C_OUTLINE = """知识整合后的信息为：{{input1}}
用户给出的大纲是{{dagang}}
# 写作要求：
1.根据检索整合的信息生成政策的内容分析，按照用户给出的大纲{{dagang}}从政策具体内容、解决的现有问题角度分析，注意：数据和内容请严格从{{input1}}中找，不要随意生成。
2.写作为总分结构：语言要偏陈述性一些，客观一些，偏政府公文风格。
# 写作格式
有单独的章节标题，标题格式为：
#二、事件分析#
（按大纲{{dagang}}的分点来分段，每段首句以总结性短句（与大纲的每一条对应）开头，格式统一为：）
一是xxx。
二是xxx。
三是xxx。
注：本章不超过五段。
# 注意
1. 请不要编写虚假内容！请严格从给定的来源中找，不要自己随便生成。
2. 只输出内容，在最后不要出现：“本分析所有内容均来自指定来源，无自主生成信息。”类似的话。
3. 只使用{{dagang}}中和本段相关的部分，即“政策内容及分析/ 事件原因 / 动因”等，其余内容如“政策建议 / 计划 / 改良方案”等不要使用"""


CHAPTER_3_SYSTEM_PROMPT_TEMPLATE_A = '''
知识整合后的信息为：{{input1}}，以及{{zhengce}} 所提供的精准资料
请根据以上信息，生成简报的第三章内容：  

# 标题：
#三、对策建议#  

# 写作要求：  
1. 总长度约600字，分三段，每段约200字。  
2. 段首句必须以“一是…”；“二是…”；“三是…”的句式开头。  
3. 建议针对第二章的问题（即：{{question}}），深度分析并从政府的角度提出可操作性措施，不要泛泛而谈。  
4. 每条建议需包含责任主体（如政府、企业、行业机构等）和实施路径（如政策、资金、合作机制、平台建设），但不要单独列出清单，要融入段落中叙述。  
5. 语言要偏陈述性、客观，不要写成宣传稿或口号。  
6. 避免出现“例如XX”“某某值”等模糊或占位式表达，避免出现括号说明。  
7. 建议逻辑：每条建议要从“问题 → 措施 → 预期效果”展开，形成完整的链条。  
8. 减少出现数据型具体数值，减少幻觉，所有关键数据和技术指标必须严格来自 {{input1}} 或 {{zhengce}} 提供的信息。  
9. 文末统一以“（完）”收尾。  
10.减少出现连续的英文语句。

输出结构：  
三段文字，每段约200字，依次提出三条建议，整体形成政策建议部分。 
'''
CHAPTER_3_SYSTEM_PROMPT_TEMPLATE_B = """
你需要根据用户原始消息总结内容。
"""
CHAPTER_3_SYSTEM_PROMPT_TEMPLATE_C = """
你需要根据用户原始消息总结内容。
"""



CHAPTER_3_USER_PROMPT_TEMPLATE_A = '''
知识整合后的信息为：{{input1}}，以及{{zhengce}} 所提供的精准资料
根据以上的信息生成以下内容 ,注意重要的数据和技术指标内容请严格从给定的来源中找，不要自己随便生成 ：

三、对策建议（总共600字左右即可）
标题建议：#三、对策建议#
写作要求：语言要偏陈述性一些，客观一些
段落格式分别为：
一是（每一小节大概200字）...

二是（每一小节大概200字）...

三是（每一小节大概200字）...
注：三条分点即可，减少括号内容的出现，
建议逻辑：
针对第二章问题(第二章为：{{question}})，分析深层原因并提出可操作性措施；建议中减少例如xx之类的语言。每项建议需包含，责任主体如政府/企业/机构）+ 实施路径（如政策/资金/合作），不必单独提及列出，融入到段落中体现相关内容即可，过渡词用：一是，二是，三是，或者用一方面，另一方面等等，组成一段完整的段落
结尾格式：末段结束后标注（完）。
注：建议从国家层面提出，建议中减少数据类的具体值的出现，减少幻觉问题，减少括号引用的内容的出现
（完）
'''

CHAPTER_3_USER_PROMPT_TEMPLATE_B = """
知识整合后的信息为：{{input1}}，以及{{zhengce}} 所提供的精准资料
请根据以上信息，生成简报的第三章内容：  

# 标题：
#三、对策建议#  

# 写作要求：  
1. 总长度约600字，分三段，每段约200字。  
2. 段首句必须以“一是…”；“二是…”；“三是…”的句式开头。  
3. 对第二章的问题（即：{{question}}），深度分析并从政府的角度提出可操作性措施，不要泛泛而谈。  注意：不出现技术或事件的具体内容，例如“Genie3”。
4. 每条建议需包含责任主体（如政府、企业、行业机构等）和实施路径（如政策、资金、合作机制、平台建设），但不要单独列出清单，要融入段落中叙述。  
5. 语言要偏陈述性、客观，不要写成宣传稿或口号。  
6. 避免出现“例如XX”“某某值”等模糊或占位式表达，避免出现括号说明。  
7. 建议逻辑：每条建议要从“问题 → 措施 → 预期效果”展开，形成完整的链条。  
8. 减少出现数据型具体数值，减少幻觉，所有关键数据和技术指标必须严格来自 {{input1}} 或 {{zhengce}} 提供的信息。  
9. 文末统一以“（完）”收尾。  
10.减少出现连续的英文语句。

输出结构：  
三段文字，每段约200字，依次提出三条建议，整体形成政策建议部分。 
注：建议从国家层面提出，建议中减少数据类的具体值的出现，减少幻觉问题，减少括号引用的内容的出现

本部分示例如下：
三、对策建议
一是强化核心技术自主创新能力。我国需聚焦多模态理解、幻觉控制、工具智能等AI关键技术方向，由政府出台专项研发支持政策，引导企业与科研机构开展产学研协同攻关，加大基础研究资金投入，推动自主模型在性能提升与场景适配方面的突破，减少对外部先进模型的依赖，夯实AI技术发展的底层基础。
二是健全AI安全与可靠性监管框架。政府应牵头制定覆盖AI模型全生命周期的安全规范，要求企业落实安全补全、沙箱运行、权限管理等机制，建立AI产品安全认证与动态评估制度，重点加强医疗、编程等关键场景AI应用的安全审查，确保模型在安全边界内提供服务，避免无根据输出或危险操作，保障用户权益与行业稳定。
三是推动AI与产业生态深度融合。政府需引导企业将AI技术嵌入现有产品与服务体系，比如软件工程领域的IDE工具、企业办公系统，医疗领域的辅助诊断平台等，支持行业协会联合企业开展AI应用试点，促进AI技术在真实场景中的落地应用，提升各行业生产效率与创新能力，推动形成“技术-产品-行业”协同发展的AI生态。（完）

"""

CHAPTER_3_USER_PROMPT_TEMPLATE_C = """
知识整合后的信息为：{{input1}}，以及{{zhengce}} 所提供的精准资料
请根据以上信息，生成简报的第二章内容：  

# 标题：
#三、对策建议#  

# 写作要求：  
1. 总长度约600字，分三段，每段约200字。  
2. 段首句必须以“一是…”；“二是…”；“三是…”的句式开头。  
3. 建议针对第二章的问题（即：{{question}}），深度分析并从政府的角度提出可操作性措施，不要泛泛而谈。  注意：不出现事件的具体名称，例如“Genie3”。
4. 每条建议需包含责任主体（如政府、企业、行业机构等）和实施路径（如政策、资金、合作机制、平台建设），但不要单独列出清单，要融入段落中叙述。  
5. 语言要偏陈述性、客观，不要写成宣传稿或口号。  
6. 避免出现“例如XX”“某某值”等模糊或占位式表达，避免出现括号说明。  
7. 建议逻辑：每条建议要从“问题 → 措施 → 预期效果”展开，形成完整的链条。  
8. 减少出现数据型具体数值，减少幻觉，所有关键数据和技术指标必须严格来自 {{input1}} 或 {{zhengce}} 提供的信息。  
9. 文末统一以“（完）”收尾。
10.减少出现连续的英文语句。

输出结构：  
三段文字，每段约200字，依次提出三条建议，整体形成政策建议部分。 
注：建议从国家层面提出，建议中减少数据类的具体值的出现，减少幻觉问题，减少括号引用的内容的出现

本部分示例如下：
三、对策建议
一是加强数据来源合法性监管。我国在发展生成式AI技术的同时，必须重视数据来源的合法性问题。政府应制定相关政策，明确数据抓取、使用和处理的规范，确保技术创新在尊重版权和隐私权的前提下进行。同时，鼓励企业建立数据使用的透明度标准，对数据来源和处理过程进行公开，以增强公众信任。
二是提升数据安全保护能力。鉴于AI公司成为黑客攻击的新目标，我国需加强对AI公司核心数据资产的保护。政府应引导企业实施数据分级保护，对高质量训练数据、用户交互数据等进行严格权限管理，防止数据泄露。同时，加强与国际合作，共享数据安全防护技术，提升整体防护水平。
三是保障利益相关者权益。在AI技术发展中，艺术家、用户等群体的贡献应得到合理回报。我国应探索建立数据红利分配机制，如数据版权费等，确保各方权益得到保护。政府可通过资金支持、政策引导等方式，鼓励企业与艺术家、用户等进行合作，实现共赢。（完）
"""

COMBINE_USER_PROMPT_TEMPLATE = '''
请将输入的{{jianshu}}{{di2zhang}}{{di3zhang}}
按顺序拼接起来，严格按照原始顺序和排版结构，具体要求如下：
#内容完整性：不得遗漏、增删或修改输入中的任何文字、符号、段落及逻辑关系，完全保留原始信息，三个段落的小标题的字体、颜色必须完全一致。
'''